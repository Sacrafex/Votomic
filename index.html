<!DOCTYPE html>
<html>
<head>
<title>Votomic - Advanced Particle Simulator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style id="mainPageStyling">
:root {
    color-scheme: dark;
    --canvas-bg-color: rgba(0, 0, 0, 0);
}
body {
    overflow: hidden;
    background: #070707;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    margin: 0px;
}
#canvas {
    border: none;
    outline: none;
    background-color: var(--canvas-bg-color);
    cursor: default;
    display: block;
    height: calc(100vh - 36px);
    width: 100%;
    margin-top:36px;
}
.stats {
    position: absolute;
    bottom: 10px;
    right: 10px;
    color: #aaa;
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: rgba(0,0,0,0.5);
    padding: 4px 8px;
    border-radius: 3px;
    font-size: 12px;
    z-index: 10;
}
.title {
    position: absolute;
    bottom: 10px;
    left: 10px;
    color: #aaa;
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: rgba(0,0,0,0.3);
    padding: 4px 8px;
    border-radius: 3px;
    font-size: 12px;
    z-index: 10;
}
</style>
</head>
<body>

<!-- Main UI Build -->
<div class="stats" id="stats">Nothing to Show...</div>
<div class="title">Votomic - An Advanced Simulation by <a href="https://www.killianzabinsky.com" style="text-decoration:none;color:inherit;">Killian Zabinsky</a></div>
<canvas id="canvas" tabindex="1"></canvas>

<!-- Assembler Creation UI -->

    <!-- Assembler Styling -->
<style id="assemblerCreateDisplayStyles">
.grid {
    display: grid;
    grid-template-columns: repeat(16, 30px);
    grid-template-rows: repeat(16, 30px);
    gap: 3px;
    margin: 0;
    transition: 0.2s;
    margin-left: calc(35% - 280px);
}
.cell {
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    background: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #aaa;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.25s, transform 0.25s, outline 0.15s;
    display: flex;
}
.menu {
    width: 30%;
    background: #181818;
    border-left: 2px solid #111111;
    padding: 0px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-left: auto;
    height: 100%;
    padding: 10px;
}
.assemblerHeader {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 35px;
    background: #111;
    border-bottom: 2px solid #222;
    display: flex;
    align-items: center;
}
.assemblerFooter {
    position: absolute;
    bottom: 0px;
    left: 0;
    width: 100%;
    height: 25px;
    background: #111;
    border-bottom: 2px solid #222;
    display: flex;
    align-items: center;
    display: flex;
}
.assemblerCreateDisplay {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background: rgba(20, 20, 20, 1);
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    z-index: 20;
    overflow-y: hidden;
    justify-content: flex-start;
    align-items: center;
    gap: 20px;
    box-sizing: border-box;
    display: none;
}
.assemblerCreateDisplay.show {
    opacity: 1;
    display: flex;
}

.GravityCreateDisplay {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background: rgba(20, 20, 20, 1);
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    z-index: 30;
    overflow-y: hidden;
    justify-content: flex-start;
    align-items: center;
    gap: 20px;
    box-sizing: border-box;
    display: none;
}
.GravityCreateDisplay.show {
    opacity: 1;
    display: flex;
}
.gravityHeader {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 35px;
    background: #111;
    border-bottom: 2px solid #222;
    display: flex;
    align-items: center;
    z-index: 31;
}
.gravityFooter {
    position: absolute;
    bottom: 0px;
    left: 0;
    width: 100%;
    height: 25px;
    background: #111;
    border-bottom: 2px solid #222;
    display: flex;
    align-items: center;
    display: flex;
}
.topMenuGUI {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 35px;
    background: #111;
    border-bottom: 2px solid #222;
    display: flex;
    align-items: center;
    display: none;
}
.topMenuGUI.show {
    opacity: 1;
    display: flex;
}
</style>
<div id="assemblerCreateDisplay" class="assemblerCreateDisplay">
<div class="assemblerHeader">
    <h3 style="margin:0; padding:8px; position:absolute; top:0; left:0;">Assembler</h3>
        <div style="margin-left:auto; display:flex; gap:8px; align-items:center;"></div>
            <a style="margin-right:10px;" href="#" onclick="toggleAssemblerDisplayGui(); return false;">
                <div class="icon icon-close" title="Close"></div>
            </a>
        </div>
    <div class="grid" id="grid"></div>
    
    <div class="menu">
    <h3>Atom Editor</h3>
    <div style="display:flex; gap:8px; margin-top:6px;">

        <button id="btnClearGrid" style="background:#1f1f1f;color:#bbb;border:1px solid #333;padding:6px 10px;border-radius:4px;cursor:pointer;">Clear Grid</button>
    </div>
    </div>
    <div class="assemblerFooter">
        <p id="assemblerStatus" style="font-size:12px; padding-left:5px; margin:0;">Designed by Killian Zabinsky&nbsp;-&nbsp;No Atom Selected</p>
        <p id="atomLocation" style="margin:0; margin-left:auto; padding-right:5px; font-size:12px; text-align:right;">{0,0}</p>
    </div>
</div>

<!-- Gravity Editor UI -->
<div id="GravityCreateDisplay" class="GravityCreateDisplay">
<div id="gravityHeader" class="gravityHeader">
    <h3 style="margin:0; padding:8px; position:absolute; top:0; left:0;">Gravity Editor</h3>
        <div style="margin-left:auto; display:flex; gap:8px; align-items:center;"></div>
            <a style="margin-right:10px;" href="#" onclick="toggleGravityDisplayGui(); return false;">
                <div class="icon icon-close" title="Close"></div>
            </a>
        </div>
    <div class="gravityFooter">
        <p id="gravityStatus" style="font-size:12px; padding-left:5px; margin:0;">Undefined.</p>
    </div>
</div>
</div>

<!-- Assembly Management -->
<script id="screenManagement">
document.addEventListener('DOMContentLoaded', () => {
    const assemblerDisplayGui = document.getElementById("assemblerCreateDisplay");
    const gravityDisplayGui = document.getElementById("GravityCreateDisplay");
    const topMenuGui = document.getElementById("topMenuGUI");

    assemblerDisplayGui.classList.remove('show');
    topMenuGui.classList.add('show');

    document.addEventListener('keydown', (event) => {
        if (event.key && event.key.toLowerCase() === 'c') {
            toggleAssemblerDisplayGui();
        }
    });

    document.addEventListener('keydown', (event) => {
        if (event.key && event.key.toLowerCase() === 'g') {
            toggleGravityDisplayGui();
        }
    });

    // Toggle Display GUI
    const toggleAssemblerDisplayGui = () => {
        if (assemblerDisplayGui.classList.contains('show')) {
            assemblerDisplayGui.classList.remove('show');
            topMenuGui.classList.add('show');
        } else {
            assemblerDisplayGui.classList.add('show');
            topMenuGui.classList.remove('show');
        }
    };

    const toggleGravityDisplayGui = () => {
        if (gravityDisplayGui.classList.contains('show')) {
            gravityDisplayGui.classList.remove('show');
            topMenuGui.classList.add('show');
        } else {
            gravityDisplayGui.classList.add('show');
            topMenuGui.classList.remove('show');
        }
    };
    window.toggleGravityDisplayGui = toggleGravityDisplayGui;
    window.toggleAssemblerDisplayGui = toggleAssemblerDisplayGui;
});
</script>

<script id="assemblyGridSetup">
// Create Atoms
const grid = document.getElementById('grid');
const info = document.getElementById('assemblerStatus');
const atomLocation = document.getElementById('atomLocation');

const defaultStatus = 'Nothing Selected ->';
info.textContent = defaultStatus;
atomLocation.textContent = '{0,0}';

for (let y = 0; y < 16; y++) {
    for (let x = 0; x < 16; x++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.dataset.x = x;
        cell.dataset.y = y;
        cell.dataset.atom = '';
        cell.title = `Cell (${x}, ${y})`;

        cell.addEventListener('mouseenter', () => {
            const atom = cell.dataset.atom || 'Empty';
            info.textContent = `Cell (${x}, ${y}) — ${atom}`;
            atomLocation.textContent = `{${x},${y}}`;
            cell.style.transform = 'scale(1.05)';
        });

        // Show default status on mouse leave
        cell.addEventListener('mouseleave', () => {
            info.textContent = defaultStatus;
            atomLocation.textContent = '{0,0}';
            cell.style.transform = '';
        });

        // Add or Remove an Atom on Click
        cell.addEventListener('click', () => {
            if (cell.dataset.atom) {
                // remove atom
                cell.dataset.atom = '';
                cell.textContent = '';
                info.textContent = `Removed atom at (${x}, ${y})`;
            } else {
                // Temporary Example Atom (will be replaced with color and border later)
                cell.dataset.atom = 'Atom';
                cell.textContent = '•';
                info.textContent = `Placed atom at (${x}, ${y}) — ${cell.dataset.atom}`;
            }
            atomLocation.textContent = `{${x},${y}}`;
        });

        grid.appendChild(cell);
    }
}

// Clear Grid Button
const btnClearGrid = document.getElementById('btnClearGrid');
if (btnClearGrid) btnClearGrid.addEventListener('click', ()=>{
    Array.from(grid.querySelectorAll('.cell')).forEach(c=>{ c.dataset.atom=''; c.textContent='';});
    info.textContent = 'Cleared grid';
});
</script>

<!-- Top Menu GUI  -->
<div id="topMenuGUI" class="topMenuGUI">
    <div style="flex:1; display:flex; align-items:center; height:100%; position:relative; padding:0 10px;">
        <div style="display:flex; gap:8px; align-items:center;">
            <h3 style="margin:0;">Votomic</h3>

        </div>
        <!-- Center Icons -->
        <div style="position:absolute; left:50%; transform:translateX(-50%); display:flex; gap:8px; align-items:center;">
            <div class="icon icon-search-plus" title="Zoom In"></div>
            <div class="icon icon-search-minus" title="Zoom Out"></div>
            <div class="icon icon-play" title="Play"></div>
            <div style="display:none;" class="icon icon-pause" title="Pause"></div>
        </div>
        <!-- Right Icons -->
        <div style="margin-left:auto; display:flex; gap:8px; align-items:center;">
            <a href="#" onclick="toggleAssemblerDisplayGui(); return false;">
                <div class="icon icon-new-assembly" title="New Assembly"></div>
            </a>
            <a href="#" onclick="toggleGravityDisplayGui(); return false;">
                <div class="icon icon-gravity-editor" title="Gravity Editor"></div>
            </a>
            <div class="icon icon-identify" title="Identify"></div>
            <div class="settings-icon icon" title="Settings"></div>
        </div>
    </div>
</div>

<style id="iconStyles">
.icon {
  width: 25px;
  height: 25px;
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
  -webkit-mask-size: contain;
  mask-repeat: no-repeat;
  mask-position: center;
  mask-size: contain;
  color: #ffffff;
  vertical-align: middle;
  transition: background-color 0.1s, transform 0.1s;
    cursor: pointer;
}
.icon.active { color: #52b788; }
.icon:hover {
  background-color: #747474;
  transform: scale(1.1);
}
.settings-icon {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 1L21.5 6.5V17.5L12 23L2.5 17.5V6.5L12 1ZM12 3.311L4.5 7.65311V16.3469L12 20.689L19.5 16.3469V7.65311L12 3.311ZM12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 1L21.5 6.5V17.5L12 23L2.5 17.5V6.5L12 1ZM12 3.311L4.5 7.65311V16.3469L12 20.689L19.5 16.3469V7.65311L12 3.311ZM12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z'/></svg>");
}
.icon-play {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M9 8.48216V15.518L15.0307 12.0001L9 8.48216ZM7.75194 5.43872L18.2596 11.5682C18.4981 11.7073 18.5787 12.0135 18.4396 12.252C18.3961 12.3265 18.3341 12.3885 18.2596 12.432L7.75194 18.5615C7.51341 18.7006 7.20725 18.62 7.06811 18.3815C7.0235 18.305 7 18.2181 7 18.1296V5.87061C7 5.59446 7.22386 5.37061 7.5 5.37061C7.58853 5.37061 7.67547 5.39411 7.75194 5.43872Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M9 8.48216V15.518L15.0307 12.0001L9 8.48216ZM7.75194 5.43872L18.2596 11.5682C18.4981 11.7073 18.5787 12.0135 18.4396 12.252C18.3961 12.3265 18.3341 12.3885 18.2596 12.432L7.75194 18.5615C7.51341 18.7006 7.20725 18.62 7.06811 18.3815C7.0235 18.305 7 18.2181 7 18.1296V5.87061C7 5.59446 7.22386 5.37061 7.5 5.37061C7.58853 5.37061 7.67547 5.39411 7.75194 5.43872Z'/></svg>");
}
.icon-pause {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M15 7C15 6.44772 15.4477 6 16 6C16.5523 6 17 6.44772 17 7V17C17 17.5523 16.5523 18 16 18C15.4477 18 15 17.5523 15 17V7ZM7 7C7 6.44772 7.44772 6 8 6C8.55228 6 9 6.44772 9 7V17C9 17.5523 8.55228 18 8 18C7.44772 18 7 17.5523 7 17V7Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M15 7C15 6.44772 15.4477 6 16 6C16.5523 6 17 6.44772 17 7V17C17 17.5523 16.5523 18 16 18C15.4477 18 15 17.5523 15 17V7ZM7 7C7 6.44772 7.44772 6 8 6C8.55228 6 9 6.44772 9 7V17C9 17.5523 8.55228 18 8 18C7.44772 18 7 17.5523 7 17V7Z'/></svg>");
}
.icon-identify {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M4.92893 2.92896L6.34315 4.34317C4.89543 5.79088 4 7.79088 4 10C4 12.2092 4.89543 14.2092 6.34315 15.6569L4.92893 17.0711C3.11929 15.2614 2 12.7614 2 10C2 7.2386 3.11929 4.7386 4.92893 2.92896ZM19.0711 2.92896C20.8807 4.7386 22 7.2386 22 10C22 12.7614 20.8807 15.2614 19.0711 17.0711L17.6569 15.6569C19.1046 14.2092 20 12.2092 20 10C20 7.79088 19.1046 5.79088 17.6569 4.34317L19.0711 2.92896ZM7.75736 5.75738L9.17157 7.1716C8.44771 7.89545 8 8.89545 8 10C8 11.1046 8.44771 12.1046 9.17157 12.8285L7.75736 14.2427C6.67157 13.1569 6 11.6569 6 10C6 8.34317 6.67157 6.84317 7.75736 5.75738ZM16.2426 5.75738C17.3284 6.84317 18 8.34317 18 10C18 11.6569 17.3284 13.1569 16.2426 14.2427L14.8284 12.8285C15.5523 12.1046 16 11.1046 16 10C16 8.89545 15.5523 7.89545 14.8284 7.1716L16.2426 5.75738ZM12 12C10.8954 12 10 11.1046 10 10C10 8.89545 10.8954 8.00002 12 8.00002C13.1046 8.00002 14 8.89545 14 10C14 11.1046 13.1046 12 12 12ZM12 14C12.5798 14 13.0774 14.413 13.1843 14.9829L14.5 22H9.5L10.8157 14.9829C10.9226 14.413 11.4202 14 12 14Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M4.92893 2.92896L6.34315 4.34317C4.89543 5.79088 4 7.79088 4 10C4 12.2092 4.89543 14.2092 6.34315 15.6569L4.92893 17.0711C3.11929 15.2614 2 12.7614 2 10C2 7.2386 3.11929 4.7386 4.92893 2.92896ZM19.0711 2.92896C20.8807 4.7386 22 7.2386 22 10C22 12.7614 20.8807 15.2614 19.0711 17.0711L17.6569 15.6569C19.1046 14.2092 20 12.2092 20 10C20 7.79088 19.1046 5.79088 17.6569 4.34317L19.0711 2.92896ZM7.75736 5.75738L9.17157 7.1716C8.44771 7.89545 8 8.89545 8 10C8 11.1046 8.44771 12.1046 9.17157 12.8285L7.75736 14.2427C6.67157 13.1569 6 11.6569 6 10C6 8.34317 6.67157 6.84317 7.75736 5.75738ZM16.2426 5.75738C17.3284 6.84317 18 8.34317 18 10C18 11.6569 17.3284 13.1569 16.2426 14.2427L14.8284 12.8285C15.5523 12.1046 16 11.1046 16 10C16 8.89545 15.5523 7.89545 14.8284 7.1716L16.2426 5.75738ZM12 12C10.8954 12 10 11.1046 10 10C10 8.89545 10.8954 8.00002 12 8.00002C13.1046 8.00002 14 8.89545 14 10C14 11.1046 13.1046 12 12 12ZM12 14C12.5798 14 13.0774 14.413 13.1843 14.9829L14.5 22H9.5L10.8157 14.9829C10.9226 14.413 11.4202 14 12 14Z'/></svg>");
}
.icon-search-plus {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748ZM10 10V7H12V10H15V12H12V15H10V12H7V10H10Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748ZM10 10V7H12V10H15V12H12V15H10V12H7V10H10Z'/></svg>");
}
.icon-search-minus {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748ZM7 10H15V12H7V10Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748ZM7 10H15V12H7V10Z'/></svg>");
}
.icon-new-assembly {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M15.7279 9.57627L14.3137 8.16206L5 17.4758V18.89H6.41421L15.7279 9.57627ZM17.1421 8.16206L18.5563 6.74785L17.1421 5.33363L15.7279 6.74785L17.1421 8.16206ZM7.24264 20.89H3V16.6473L16.435 3.21231C16.8256 2.82179 17.4587 2.82179 17.8492 3.21231L20.6777 6.04074C21.0682 6.43126 21.0682 7.06443 20.6777 7.45495L7.24264 20.89Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M15.7279 9.57627L14.3137 8.16206L5 17.4758V18.89H6.41421L15.7279 9.57627ZM17.1421 8.16206L18.5563 6.74785L17.1421 5.33363L15.7279 6.74785L17.1421 8.16206ZM7.24264 20.89H3V16.6473L16.435 3.21231C16.8256 2.82179 17.4587 2.82179 17.8492 3.21231L20.6777 6.04074C21.0682 6.43126 21.0682 7.06443 20.6777 7.45495L7.24264 20.89Z'/></svg>");
}
.icon-gravity-editor {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M15.7279 9.57627L14.3137 8.16206L5 17.4758V18.89H6.41421L15.7279 9.57627ZM17.1421 8.16206L18.5563 6.74785L17.1421 5.33363L15.7279 6.74785L17.1421 8.16206ZM7.24264 20.89H3V16.6473L16.435 3.21231C16.8256 2.82179 17.4587 2.82179 17.8492 3.21231L20.6777 6.04074C21.0682 6.43126 21.0682 7.06443 20.6777 7.45495L7.24264 20.89Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' viewBox='0 0 24 24'><path d='M11.9998 5.80615C10.8546 6.5426 9.69194 7.47421 8.58259 8.58356C7.4739 9.69225 6.54273 10.8542 5.80649 11.9988C6.54298 13.1441 7.47468 14.3069 8.58418 15.4164C9.69301 16.5252 10.8552 17.4565 11.9998 18.1928C13.1445 17.4565 14.3066 16.5252 15.4154 15.4164C16.5249 14.3069 17.4566 13.1441 18.1931 11.9988C17.4569 10.8542 16.5257 9.69226 15.417 8.58356C14.3077 7.47421 13.145 6.54261 11.9998 5.80615ZM13.7845 4.80734C14.7828 5.51769 15.7694 6.35036 16.7098 7.29078C17.6496 8.23059 18.4818 9.21647 19.1918 10.2141C19.4153 9.74368 19.6019 9.2832 19.7503 8.83806C20.4512 6.73546 20.2234 5.26592 19.4783 4.52074C18.7331 3.77556 17.2635 3.5478 15.1609 4.24867C14.7157 4.39709 14.2551 4.58376 13.7845 4.80734ZM19.1922 13.7832C18.4817 14.7817 17.6489 15.7685 16.7082 16.7092C15.7682 17.6492 14.7821 18.4816 13.7842 19.1917C14.2554 19.4157 14.7167 19.6027 15.1625 19.7513C17.2651 20.4522 18.7347 20.2244 19.4798 19.4792C20.225 18.734 20.4528 17.2645 19.7519 15.1619C19.6033 14.7159 19.4162 14.2545 19.1922 13.7832ZM11.9998 20.3254C12.8757 20.8159 13.745 21.2059 14.5844 21.4857C16.8931 22.2553 19.274 22.2707 20.7726 20.772C22.2713 19.2734 22.2559 16.8925 21.4864 14.5838C21.2065 13.7441 20.8163 12.8747 20.3257 11.9986C20.8156 11.1234 21.2052 10.2549 21.4848 9.41621C22.2544 7.10746 22.2697 4.72661 20.771 3.22796C19.2724 1.72931 16.8915 1.74464 14.5828 2.51422C13.7439 2.79386 12.8752 3.18359 11.9998 3.67367C11.1244 3.1836 10.2557 2.79387 9.41683 2.51423C7.10809 1.74465 4.72723 1.72932 3.22858 3.22797C1.72993 4.72662 1.74527 7.10747 2.51485 9.41622C2.79442 10.2549 3.18403 11.1234 3.67394 11.9986C3.18328 12.8747 2.79313 13.7441 2.51326 14.5837C1.74368 16.8925 1.72835 19.2733 3.227 20.772C4.72565 22.2707 7.1065 22.2553 9.41525 21.4857C10.2547 21.2059 11.1239 20.8159 11.9998 20.3254ZM10.2154 19.1917C9.21755 18.4816 8.23142 17.6492 7.2914 16.7092C6.35075 15.7685 5.51792 14.7817 4.80746 13.7832C4.5834 14.2545 4.39637 14.7159 4.24771 15.1619C3.54684 17.2645 3.7746 18.734 4.51978 19.4792C5.26496 20.2244 6.7345 20.4522 8.8371 19.7513C9.28295 19.6027 9.7442 19.4157 10.2154 19.1917ZM4.80778 10.2141C5.51782 9.21647 6.35001 8.23058 7.28981 7.29078C8.23023 6.35035 9.21679 5.51769 10.2151 4.80734C9.74454 4.58376 9.28394 4.3971 8.83868 4.24868C6.73608 3.54781 5.26654 3.77557 4.52136 4.52075C3.77618 5.26593 3.54843 6.73547 4.24929 8.83807C4.39767 9.2832 4.58428 9.74368 4.80778 10.2141ZM11.9998 10.5201C11.1825 10.5201 10.5199 11.1826 10.5199 12C10.5199 12.8173 11.1825 13.4799 11.9998 13.4799C12.8171 13.4799 13.4797 12.8173 13.4797 12C13.4797 11.1826 12.8171 10.5201 11.9998 10.5201ZM8.69163 12C8.69163 10.1729 10.1727 8.69179 11.9998 8.69179C13.8269 8.69179 15.308 10.1729 15.308 12C15.308 13.827 13.8269 15.3081 11.9998 15.3081C10.1727 15.3081 8.69163 13.827 8.69163 12Z'/></svg>");
}
.icon-close {
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M11.9997 10.5865L16.9495 5.63672L18.3637 7.05093L13.4139 12.0007L18.3637 16.9504L16.9495 18.3646L11.9997 13.4149L7.04996 18.3646L5.63574 16.9504L10.5855 12.0007L5.63574 7.05093L7.04996 5.63672L11.9997 10.5865Z'/></svg>");
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M11.9997 10.5865L16.9495 5.63672L18.3637 7.05093L13.4139 12.0007L18.3637 16.9504L16.9495 18.3646L11.9997 13.4149L7.04996 18.3646L5.63574 16.9504L10.5855 12.0007L5.63574 7.05093L7.04996 5.63672L11.9997 10.5865Z'/></svg>");
}

</style>

<!-- Core Simulation Engine -->
<script id="engine">
;(()=>{
    'use strict';

    const canvas = document.getElementById('canvas');
    const stats = document.getElementById('stats');
    if (!canvas || !stats) return;
    const ctx = canvas.getContext('2d');

    const state = {
        running: false,
        fps: 0,
        ms: 0,
        lastTime: 0,
        entities: []
    };

    function resizeCanvas(){
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        const w = Math.max(1, Math.floor((rect.width || window.innerWidth) * dpr));
        const h = Math.max(1, Math.floor((rect.height || window.innerHeight) * dpr));
        if (canvas.width !== w) canvas.width = w;
        if (canvas.height !== h) canvas.height = h;
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function updateStats(){
        const fps = state.fps.toFixed(1);
        const ms = state.ms.toFixed(2);
        const count = state.entities.length;
        stats.textContent = `FPS: ${fps} | MS: ${ms} | Entities: ${count}`;
    }

    function loop(ts){
        if (!state.running) return;
        if (!state.lastTime) state.lastTime = ts;
        const dtMs = ts - state.lastTime;
        const dt = Math.min(0.05, Math.max(0.0001, dtMs / 1000));
        state.lastTime = ts;

        // Smooth FPS and frame time (ms)
        const instFps = 1 / dt;
        const instMs = dt * 1000;
        state.fps = state.fps ? state.fps * 0.9 + instFps * 0.1 : instFps;
        state.ms = state.ms ? state.ms * 0.9 + instMs * 0.1 : instMs;

        // Clear canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Update + Draw entities if any (no-op by default)
        for (const e of state.entities){ if (e.update) e.update(dt, ctx, canvas); }
        for (const e of state.entities){ if (e.draw) e.draw(ctx, canvas); }

        updateStats();
        requestAnimationFrame(loop);
    }

    function togglePlayIcons(running){
        const play = document.querySelector('.icon-play');
        const pause = document.querySelector('.icon-pause');
        if (!play || !pause) return;
        play.style.display = running ? 'none' : 'inline-block';
        pause.style.display = running ? 'inline-block' : 'none';
    }

    // Dot Simulation (will be changed)
    function DemoDot(){
        const dpr = window.devicePixelRatio || 1;
        let x = (canvas.width/dpr)/2, y = (canvas.height/dpr)/2;
        let vx = 40, vy = 30; // px/s
        const r = 4;
        return {
            update(dt, _ctx, cvs){
                const w = (cvs.width)/(window.devicePixelRatio||1);
                const h = (cvs.height)/(window.devicePixelRatio||1);
                x += vx * dt; y += vy * dt;
                if (x < r || x > w - r) { vx *= -1; x = Math.max(r, Math.min(w - r, x)); }
                if (y < r || y > h - r) { vy *= -1; y = Math.max(r, Math.min(h - r, y)); }
            },
            draw(ctx){
                ctx.fillStyle = '#52b788';
                ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI*2); ctx.fill();
            }
        };
    }

    const VotomicEngine = {
        start(){ if (!state.running){ if (state.entities.length === 0) state.entities.push(DemoDot()); state.running = true; state.lastTime = 0; requestAnimationFrame(loop); togglePlayIcons(true);} },
        stop(){ state.running = false; togglePlayIcons(false); },
        toggle(){ state.running ? this.stop() : this.start(); },
        addEntity(e){ state.entities.push(e); updateStats(); },
        clearEntities(){ state.entities.length = 0; updateStats(); },
        getState(){ return { ...state }; }
    };
    window.VotomicEngine = VotomicEngine;

    // Hook UI controls
    const playBtn = document.querySelector('.icon-play');
    const pauseBtn = document.querySelector('.icon-pause');
    if (playBtn) playBtn.addEventListener('click', ()=> VotomicEngine.start());
    if (pauseBtn) pauseBtn.addEventListener('click', ()=> VotomicEngine.stop());

    // Initial stats display
    updateStats();
})();
</script>
</body>
</html>
